<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
    <title>Leave</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <style>
    	.td_left{
            width: 150px;
            text-align: left;
            height: 40px;

        }
        .td_right{
            padding-right: 3px;

        }
    </style>    
    <script>
        function call(name) {
            alert("We will help to contact the owner of  " + name )
        }
        //获取系统时间
        function showTime() {
            //文字增加空格
            document.getElementById("nowtime").style ="white-space:pre;";
            //显示时间
            document.getElementById("nowtime").innerText = dateToString(new Date());
        }
        setInterval("showTime()",1000);
        //月日时分秒小于10补0
        function p(s) {return s <10 ? '0' +s : s;}
        function dateToString(time) {
            year = time.getFullYear();//年
            month = time.getMonth() + 1;//月
            day = time.getDate();//日
            hour = time.getHours();//时
            minutes = time.getMinutes();//分
            seconds = time.getSeconds();//秒
            return year + "." + p(month) + "." + p(day) + " " + p(hour) + ":" + p(minutes) + ":" + p(seconds)
        }

        //车位id,停放小时数
        function showInfo(_id,_duration){
            document.getElementById('parkspaceid').innerText='Selected parking spaces： '+_id.charAt(0).toUpperCase() +_id.slice(1)
            document.getElementById('departuretime').innerText='Estimate to departure at：'+dateToString(new Date(new Date().getTime() + _duration * 3600 * 1000))
        }

        //遮挡状态1，遮挡状态2
        function showBlocked(_status1,_status2){
            if(!_status1){
                let lab=document.getElementById('status1');
                lab.parentNode.removeChild(lab)
            }
            if(!_status2){
                let lab=document.getElementById('status2');
                lab.parentNode.removeChild(lab)
            }
            if(_status1==false&&_status2==false){
                document.getElementById('blockstatus').innerText="Your vehicle is not blocked"
            }
        }
    </script>
</head>

<body onload="showInfo('a03',8);showBlocked(false,true)">
    <div class="mainbody">
        <nav>
            <a href="./myreservation.html">My Parking Place</a> 
            <a href="./park.html">Park</a> 
            <a href="./leave.html" class="active">Leave</a> 
            <a href="./index.html" style="float: right;">Logout</a>
        </nav>
        <div class="Messbox">
            <p id="parkspaceid">Selected parking spaces： </p>
            <p>Time：<lable id="nowtime"></lable></p>
            <p id="departuretime">Estimate to departure at：</p>
        </div>
        <div class="Messbox">
            <p id="blockstatus">Your vehicle is blocked by: </p>
            <table style="border-collapse:separate; border-spacing:0px 5px;background-color: white;border-radius: 5px;">
            	<div>
                <tr id="status1">
                    <td class="td_left"> A07 沪A12345<br> will leave 5h later</td>
                    <td class="td_right"><button class="button1" onclick="call('沪A12345')" >call</button></td>
                </tr>

                <tr id="status2">
                    <td class="td_left"> A09 沪B54321<br> will leave 4h later</td>
                    <td class="td_right"><button class="button1" onclick="call('沪B54321')" >call</button></td>
                </tr>
                </div>
            </table>
        </div>
        <div style="text-align: center;">
        <a href="./reserve.html">
            <button class="button1 button2" >
                Leave Early
            </button>
        </a>
        </div>
    </div>
</body>

</html>